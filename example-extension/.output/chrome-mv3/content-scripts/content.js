var M=Object.defineProperty;var O=(f,d,a)=>d in f?M(f,d,{enumerable:!0,configurable:!0,writable:!0,value:a}):f[d]=a;var p=(f,d,a)=>O(f,typeof d!="symbol"?d+"":d,a);var content=(function(){"use strict";var I,T;function f(o){return o}const a=(T=(I=globalThis.browser)==null?void 0:I.runtime)!=null&&T.id?globalThis.browser:globalThis.chrome;(function(){var r;const o=console.log,e=console.error,n=console.warn,i=console.info,l=console.debug;let s="unknown";typeof ServiceWorkerGlobalScope<"u"&&self instanceof ServiceWorkerGlobalScope?s="background:service-worker":typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?s="worker":typeof window<"u"&&(((r=window.location)==null?void 0:r.protocol)==="chrome-extension:"?s="popup:main-world":(document==null?void 0:document.readyState)!==void 0?s="content:main-world":s="inpage:main-world");function c(t,u){const C=new Date().toISOString(),E={level:t,message:u.map(g=>typeof g=="object"?JSON.stringify(g,null,2):String(g)).join(" "),context:s,timestamp:C};fetch("http://localhost:3001/api/debug/client-logs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)}).catch(()=>{})}console.log=function(...t){return c("log",t),o.apply(console,t)},console.error=function(...t){return c("error",t),e.apply(console,t)},console.warn=function(...t){return c("warn",t),n.apply(console,t)},console.info=function(...t){return c("info",t),i.apply(console,t)},console.debug=function(...t){return c("debug",t),l.apply(console,t)}})();const k={matches:["*://*/*"],main(){console.log("[Content] Content script started on:",window.location.href),console.info("[Content] Page title:",document.title),setTimeout(()=>{console.log("[Content] Basic content script logging"),console.warn("[Content] Content script warning"),console.error("[Content] Content script error"),console.info("[Content] DOM ready state:",document.readyState),console.debug("[Content] User agent:",navigator.userAgent)},500),setTimeout(()=>{const r={title:document.title,url:window.location.href,elementCount:document.querySelectorAll("*").length,hasH1:document.querySelector("h1")!==null,scripts:document.scripts.length};console.log("[Content] Page analysis:",r)},1e3),setTimeout(()=>{try{document.querySelector("#non-existent-element").click()}catch(r){console.error("[Content] DOM error caught:",r)}},1500),setTimeout(()=>{Promise.reject(new Error("Content script promise rejection")).catch(()=>{})},2e3),setTimeout(()=>{console.log("[Content] Injecting inpage script...");const r=document.createElement("script");r.src=a.runtime.getURL("/inpage.js"),r.onload=()=>{console.log("[Content] Inpage script loaded successfully"),r.remove()},r.onerror=t=>{console.error("[Content] Failed to load inpage script:",t)},(document.head||document.documentElement).appendChild(r)},2500),setTimeout(async()=>{try{console.log("[Content] Sending message to background...");const r=await a.runtime.sendMessage({type:"test-response",from:"content",url:window.location.href});console.log("[Content] Response from background:",r)}catch(r){console.error("[Content] Failed to communicate with background:",r)}},3e3);let o=0;const e=()=>{o++,o<=3&&console.log(`[Content] Scroll event #${o}, position:`,{x:window.scrollX,y:window.scrollY,documentHeight:document.documentElement.scrollHeight,windowHeight:window.innerHeight})};window.addEventListener("scroll",e,{passive:!0});let n=0;const i=r=>{var t;n++,n<=5&&console.log(`[Content] Click event #${n}:`,{target:(t=r.target)==null?void 0:t.tagName,coordinates:{x:r.clientX,y:r.clientY},button:r.button,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey})};document.addEventListener("click",i);const l=new MutationObserver(r=>{r.length>0&&console.log("[Content] DOM mutations detected:",{count:r.length,types:[...new Set(r.map(t=>t.type))],addedNodes:r.reduce((t,u)=>t+u.addedNodes.length,0),removedNodes:r.reduce((t,u)=>t+u.removedNodes.length,0)})});l.observe(document.body||document.documentElement,{childList:!0,subtree:!0,attributes:!0,attributeOldValue:!0});let s=0;const c=setInterval(()=>{s++,console.log(`[Content] Periodic content log #${s} - Page visible:`,!document.hidden),s>=3&&(clearInterval(c),console.log("[Content] Periodic content logging completed"))},3e3);setTimeout(()=>{window.removeEventListener("scroll",e),document.removeEventListener("click",i),l.disconnect(),console.log("[Content] Content script cleanup completed")},15e3),console.log("[Content] Content script initialization complete")}};function h(o,...e){}const N={debug:(...o)=>h(console.debug,...o),log:(...o)=>h(console.log,...o),warn:(...o)=>h(console.warn,...o),error:(...o)=>h(console.error,...o)},b=class b extends Event{constructor(e,n){super(b.EVENT_NAME,{}),this.newUrl=e,this.oldUrl=n}};p(b,"EVENT_NAME",v("wxt:locationchange"));let S=b;function v(o){var e;return`${(e=a==null?void 0:a.runtime)==null?void 0:e.id}:content:${o}`}function L(o){let e,n;return{run(){e==null&&(n=new URL(location.href),e=o.setInterval(()=>{let i=new URL(location.href);i.href!==n.href&&(window.dispatchEvent(new S(i,n)),n=i)},1e3))}}}const m=class m{constructor(e,n){p(this,"isTopFrame",window.self===window.top);p(this,"abortController");p(this,"locationWatcher",L(this));p(this,"receivedMessageIds",new Set);this.contentScriptName=e,this.options=n,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}get signal(){return this.abortController.signal}abort(e){return this.abortController.abort(e)}get isInvalid(){return a.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(e){return this.signal.addEventListener("abort",e),()=>this.signal.removeEventListener("abort",e)}block(){return new Promise(()=>{})}setInterval(e,n){const i=setInterval(()=>{this.isValid&&e()},n);return this.onInvalidated(()=>clearInterval(i)),i}setTimeout(e,n){const i=setTimeout(()=>{this.isValid&&e()},n);return this.onInvalidated(()=>clearTimeout(i)),i}requestAnimationFrame(e){const n=requestAnimationFrame((...i)=>{this.isValid&&e(...i)});return this.onInvalidated(()=>cancelAnimationFrame(n)),n}requestIdleCallback(e,n){const i=requestIdleCallback((...l)=>{this.signal.aborted||e(...l)},n);return this.onInvalidated(()=>cancelIdleCallback(i)),i}addEventListener(e,n,i,l){var s;n==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),(s=e.addEventListener)==null||s.call(e,n.startsWith("wxt:")?v(n):n,i,{...l,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),N.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:m.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:Math.random().toString(36).slice(2)},"*")}verifyScriptStartedEvent(e){var s,c,r;const n=((s=e.data)==null?void 0:s.type)===m.SCRIPT_STARTED_MESSAGE_TYPE,i=((c=e.data)==null?void 0:c.contentScriptName)===this.contentScriptName,l=!this.receivedMessageIds.has((r=e.data)==null?void 0:r.messageId);return n&&i&&l}listenForNewerScripts(e){let n=!0;const i=l=>{if(this.verifyScriptStartedEvent(l)){this.receivedMessageIds.add(l.data.messageId);const s=n;if(n=!1,s&&(e!=null&&e.ignoreFirstEvent))return;this.notifyInvalidated()}};addEventListener("message",i),this.onInvalidated(()=>removeEventListener("message",i))}};p(m,"SCRIPT_STARTED_MESSAGE_TYPE",v("wxt:content-script-started"));let y=m;function A(){}(function(){var r;const o=console.log,e=console.error,n=console.warn,i=console.info,l=console.debug;let s="unknown";typeof ServiceWorkerGlobalScope<"u"&&self instanceof ServiceWorkerGlobalScope?s="background:service-worker":typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?s="worker":typeof window<"u"&&(((r=window.location)==null?void 0:r.protocol)==="chrome-extension:"?s="popup:main-world":(document==null?void 0:document.readyState)!==void 0?s="content:main-world":s="inpage:main-world");function c(t,u){const C=new Date().toISOString(),E={level:t,message:u.map(g=>typeof g=="object"?JSON.stringify(g,null,2):String(g)).join(" "),context:s,timestamp:C};fetch("http://localhost:3001/api/debug/client-logs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)}).catch(()=>{})}console.log=function(...t){return c("log",t),o.apply(console,t)},console.error=function(...t){return c("error",t),e.apply(console,t)},console.warn=function(...t){return c("warn",t),n.apply(console,t)},console.info=function(...t){return c("info",t),i.apply(console,t)},console.debug=function(...t){return c("debug",t),l.apply(console,t)}})();function w(o,...e){}const P={debug:(...o)=>w(console.debug,...o),log:(...o)=>w(console.log,...o),warn:(...o)=>w(console.warn,...o),error:(...o)=>w(console.error,...o)};return(async()=>{try{const{main:o,...e}=k,n=new y("content",e);return await o(n)}catch(o){throw P.error('The content script "content" crashed on startup!',o),o}})()})();
content;